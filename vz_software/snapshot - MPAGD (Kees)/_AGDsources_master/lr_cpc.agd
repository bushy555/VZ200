
DEFINEWINDOW    1 1 22 22

DEFINECONTROLS  '2' 'W' '9' '0' 'M' 'Z' 'H' '1' '2' '3' '4'

DEFINEBLOCK     EMPTYBLOCK
                3 3 2 3 3 2 3 3
                2 3 3 2 3 3 2 3
                3 2 3 3 2 3 3 2

DEFINEBLOCK     WALLBLOCK
                192 192 128 192 192 128 192 192
                128 0 0 0 192 192 128 192
                192 128 192 192 128 0 0 0

DEFINEBLOCK     LADDERBLOCK
                87 3 170 87 3 170 87 255
                170 87 3 170 87 3 170 87
                3 170 87 255 170 87 3 170

DEFINEBLOCK     FODDERBLOCK
                192 192 128 192 192 128 192 192
                128 192 192 128 192 192 128 192
                192 128 192 192 128 0 0 0

DEFINEBLOCK     COLLECTABLE
                0 8 0 0 8 0 0 0
                0 0 8 0 4 12 0 12
                12 8 12 4 8 4 4 0


DEFINESPRITE    4
                3 3 3 3 3 3 3 169 3 3 3 86 252 3 3 3
                86 252 3 3 3 86 169 3 3 3 86 169 3 3 3 252
                252 169 3 86 86 252 3 3 3 86 169 3 3 3 86 252
                3 3 3 86 252 3 3 86 252 252 3 3 86 252 252 3
                3 3 3 252 3 3 3 3 252 3 3 3 3 3 3 3
                3 3 3 3 3 3 86 169 3 3 3 86 252 3 3 252
                86 252 86 169 86 86 252 3 169 252 86 252 252 169 3 252
                252 169 169 3 3 252 169 3 3 3 252 169 3 3 86 252
                169 3 3 86 252 3 3 3 86 252 3 3 3 252 252 169
                3 86 86 252 169 3 252 86 169 86 169 252 3 3 252 169
                3 86 169 3 3 3 86 252 3 3 3 86 252 3 3 3
                86 252 3 3 169 86 252 3 3 86 86 252 169 169 252 252
                252 169 169 86 3 252 252 169 3 86 252 169 169 3 86 252
                3 169 3 86 252 3 3 3 252 252 3 3 86 86 252 169
                3 86 86 169 169 3 86 169 3 169 3 252 169 86 252 3
                3 86 169 3 3 3 86 252 3 3 3 86 252 3 3 252
                86 252 86 169 86 86 252 3 169 252 86 252 252 169 3 252
                252 169 169 3 3 252 169 3 3 86 252 169 3 3 86 252
                3 3 3 86 252 3 3 3 86 252 3 3 3 86 252 3
                3 3 86 252 3 3 3 252 252 169 3 3 252 252 169 3

DEFINESPRITE    4
                3 3 3 3 3 3 3 252 3 3 3 3 252 3 3 3
                3 252 3 3 3 3 252 3 3 3 3 169 3 3 86 169
                252 3 3 3 86 169 169 3 3 3 169 3 3 3 3 169
                3 3 3 86 252 169 3 3 252 86 169 3 3 252 3 169
                3 3 252 3 3 3 3 252 3 3 3 3 3 3 3 3
                3 3 252 3 3 3 86 252 3 3 3 86 252 3 3 169
                86 252 3 169 169 252 252 252 169 86 252 252 169 3 3 252
                169 3 3 3 252 169 3 3 3 252 252 3 3 3 86 252
                3 3 86 86 252 169 3 86 252 252 252 3 252 86 252 86
                169 252 3 252 86 169 3 3 3 3 3 3 3 3 3 3
                3 3 252 3 3 3 86 252 3 169 3 86 252 3 169 3
                86 252 86 3 3 252 252 169 3 169 252 252 169 3 252 252
                169 3 3 86 252 169 3 3 3 252 252 3 3 86 252 252
                3 3 252 86 252 3 3 252 86 252 169 3 3 86 252 169
                3 3 3 252 86 3 3 3 3 86 169 3 3 3 86 169
                3 3 252 3 3 3 86 252 3 3 3 86 252 3 3 169
                86 252 3 169 169 252 252 252 169 86 252 252 169 3 3 252
                169 3 3 3 252 169 3 3 3 252 252 3 3 3 86 252
                3 3 86 86 252 169 3 86 252 252 252 3 252 86 252 86
                169 252 3 252 86 169 3 3 3 3 3 3 3 3 3 3

DEFINESPRITE    2
                3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
                3 3 3 3 86 252 169 3 3 86 86 86 3 3 252 86
                86 3 3 252 252 252 3 3 252 252 252 3 3 252 86 86
                3 3 252 86 86 3 3 252 3 86 169 3 252 3 86 169
                3 252 3 86 169 3 3 3 3 3 3 3 3 3 3 3
                3 252 252 169 3 86 252 252 252 3 252 252 252 169 169 252
                252 252 169 169 252 169 86 252 169 252 169 252 169 169 252 252
                252 252 169 252 252 252 169 169 252 252 252 169 169 252 252 252
                252 169 252 169 252 252 3 86 252 252 169 169 3 86 3 86
                169 3 86 252 252 169 3 86 252 252 169 3 86 252 252 169

DEFINESPRITE    1
                3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
                3 3 3 3 252 252 252 3 3 252 252 252 3 3 3 3
                3 3 3 3 3 3 3 3 252 252 252 3 3 252 252 252
                3 3 3 3 3 3 3 3 3 3 3 3 252 252 252 3
                3 252 252 252 3 3 3 3 3 3 3 3 3 3 3 3


DEFINEOBJECT    254 56 120
                0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
                0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
                0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
                0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0



DEFINESCREEN      1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   0   0   0   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   0   0   0   1
                  1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   0   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   0   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   2   2   0   0   0   0   0   0   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   2   2   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   2   2   1   1
                  1   0   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   1
                  1   0   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
                  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
SPRITEPOSITION  0 0 104 120
SPRITEPOSITION  1 2 128 16
SPRITEPOSITION  2 3 152 16
SPRITEPOSITION  2 3 56 80
SPRITEPOSITION  2 3 80 160
SPRITEPOSITION  2 3 32 16

DEFINESCREEN      1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1
                  1   0   0   0   0   0   0   0   0   0   2   2   1   1   1   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   2   2   1   1   1   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   2   2   1   1   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   2   2   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   2   2   1   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
                  0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
SPRITEPOSITION  0 0 80 64
SPRITEPOSITION  1 2 128 16
SPRITEPOSITION  1 2 32 16
SPRITEPOSITION  2 3 32 80
SPRITEPOSITION  2 3 56 112
SPRITEPOSITION  2 3 80 128
SPRITEPOSITION  2 3 128 88

DEFINESCREEN      1   1   1   1   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1
                  1   1   1   1   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1
                  1   1   1   1   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1   2   2   1
                  1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1   2   2   1
                  1   1   1   2   2   1   1   1   1   1   1   1   1   2   2   1   1   1   1   2   2   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   2   2   0   0   0   0   2   2   1
                  1   0   0   2   2   0   0   0   0   0   0   0   0   2   2   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   0   0   0   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   2   2   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1
                  1   0   0   0   0   2   2   0   0   0   0   1   0   0   0   2   2   0   0   0   0   1
                  1   0   0   0   0   2   2   0   0   0   0   1   0   0   0   2   2   0   0   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
SPRITEPOSITION  0 0 64 136
SPRITEPOSITION  1 2 40 56
SPRITEPOSITION  1 2 112 64
SPRITEPOSITION  2 3 16 40
SPRITEPOSITION  2 3 16 128
SPRITEPOSITION  2 3 88 152
SPRITEPOSITION  2 3 136 88
SPRITEPOSITION  2 3 160 16
SPRITEPOSITION  2 3 160 160

DEFINESCREEN      1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   2   2   1   2   2   1   1   1   1   1   1
                  1   0   0   0   0   0   0   0   0   0   0   2   2   1   2   2   0   0   0   0   0   1
                  1   0   0   0   0   0   0   0   0   0   0   2   2   1   2   2   0   0   0   0   0   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   0   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1
                  1   0   0   0   0   0   0   1   0   0   0   0   0   0   2   2   0   0   0   0   0   1
                  1   0   0   0   0   0   0   1   0   0   0   0   0   0   2   2   0   0   0   0   0   1
                  1   1   1   1   1   2   2   1   1   2   2   1   1   1   1   1   1   1   1   2   2   1
                  1   0   0   0   0   2   2   0   0   2   2   0   0   0   0   0   0   0   0   2   2   1
                  1   0   0   0   0   2   2   0   0   2   2   0   0   0   0   0   0   0   0   2   2   1
                  1   2   2   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   1   0   0   0   0   1
                  1   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   1   0   0   0   0   1
                  1   1   1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   0   0   0   2   2   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
SPRITEPOSITION  0 0 160 16
SPRITEPOSITION  1 2 16 104
SPRITEPOSITION  1 2 64 80
SPRITEPOSITION  1 2 112 112
SPRITEPOSITION  2 3 16 16
SPRITEPOSITION  2 3 88 16
SPRITEPOSITION  2 3 136 160
SPRITEPOSITION  2 3 16 152
SPRITEPOSITION  2 3 64 24

DEFINESCREEN      1   0   0   0   0   0   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
                  1   0   0   0   0   4   1   0   0   0   3   0   0   0   0   0   0   0   0   0   0   1
                  1   0   0   0   0   0   1   0   0   0   3   0   0   0   0   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1
                  1   2   2   1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   2   2   1   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   2   2   1   1   1   1   2   2   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   2   2   0   0   0   0   2   2   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   2   2   0   0   0   0   2   2   0   0   0   2   2   1
                  1   1   1   1   1   2   2   1   1   1   1   2   2   1   1   1   1   1   1   1   1   1
                  1   1   0   0   0   2   2   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   1   0   0   0   2   2   0   0   0   0   2   2   0   0   0   0   0   0   0   0   1
                  1   1   2   2   1   1   1   1   1   1   1   1   1   1   1   1   1   2   2   1   1   1
                  1   1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   2   2   0   0   0   0   0   0   0   0   0   0   0   0   0   2   2   0   0   1
                  1   1   1   1   1   2   2   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1
                  1   0   0   0   0   2   2   0   0   0   0   0   1   2   2   0   0   0   0   0   0   1
                  1   0   0   0   0   2   2   0   0   0   0   0   1   2   2   0   0   0   0   0   0   1
                  1   2   2   1   1   1   1   1   1   1   2   2   1   1   1   1   1   1   1   2   2   1
                  1   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   1
                  1   2   2   0   0   0   0   0   0   0   2   2   0   0   0   0   0   0   0   2   2   1
                  1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
SPRITEPOSITION  0 0 112 160
SPRITEPOSITION  1 2 88 72
SPRITEPOSITION  1 2 16 160
SPRITEPOSITION  1 2 160 64
SPRITEPOSITION  2 3 88 160
SPRITEPOSITION  2 3 40 40
SPRITEPOSITION  2 3 16 64
SPRITEPOSITION  2 3 160 104

MAP             WIDTH 5
                STARTSCREEN 255
                255   0   1   2 255
ENDMAP

DEFINEFONT      0 0 0 0 0 0 0 0
                0 32 32 32 32 0 32 0
                80 80 0 0 0 0 0 0
                0 80 248 80 248 80 0 0
                32 112 192 96 48 224 32 0
                0 160 32 64 64 128 160 0
                0 64 160 64 176 160 112 0
                64 64 0 0 0 0 0 0
                0 32 64 64 64 64 32 0
                0 64 32 32 32 32 64 0
                0 32 248 112 248 32 0 0
                0 64 64 224 64 64 0 0
                0 0 0 0 0 0 32 64
                0 0 0 224 0 0 0 0
                0 0 0 0 0 0 64 0
                0 32 32 64 64 128 128 0
                0 96 144 176 208 144 96 0
                0 64 192 64 64 64 224 0
                0 96 144 16 96 128 240 0
                0 96 144 32 16 144 96 0
                0 32 96 160 240 32 32 0
                0 240 128 224 16 16 224 0
                0 96 128 224 144 144 96 0
                0 240 16 32 32 64 64 0
                0 96 144 96 144 144 96 0
                0 96 144 144 112 16 96 0
                0 0 64 0 0 64 0 0
                0 0 64 0 0 64 128 0
                0 0 32 64 128 64 32 0
                0 0 128 64 32 64 128 0
                0 0 0 224 0 224 0 0
                0 224 16 32 64 0 64 0
                0 96 144 176 176 128 112 0
                0 96 144 144 240 144 144 0
                0 224 144 224 144 144 224 0
                0 96 144 128 128 144 96 0
                0 192 160 144 144 144 224 0
                0 240 128 224 128 128 240 0
                0 240 128 224 128 128 128 0
                0 96 144 128 176 144 112 0
                0 144 144 240 144 144 144 0
                0 224 64 64 64 64 224 0
                0 48 16 16 16 144 96 0
                0 144 160 192 160 144 144 0
                0 128 128 128 128 128 240 0
                0 136 216 168 136 136 136 0
                0 144 208 208 176 176 144 0
                0 96 144 144 144 144 96 0
                0 224 144 144 224 128 128 0
                0 96 144 144 176 144 112 0
                0 224 144 160 192 160 144 0
                0 112 128 64 32 16 224 0
                0 248 32 32 32 32 32 0
                0 144 144 144 144 144 96 0
                0 136 136 80 80 32 32 0
                0 136 136 136 168 168 80 0
                0 144 144 96 96 144 144 0
                0 136 136 80 32 32 32 0
                0 240 16 32 64 128 240 0
                0 96 64 64 64 64 96 0
                0 128 128 64 64 32 32 0
                0 96 32 32 32 32 96 0
                64 160 0 0 0 0 0 0
                0 0 0 0 0 0 0 248
                48 64 64 224 64 64 240 0
                0 224 16 112 144 144 112 0
                0 128 128 224 144 144 224 0
                0 0 96 128 128 144 96 0
                0 16 16 112 144 144 112 0
                0 0 96 144 240 128 112 0
                0 48 64 224 64 64 64 0
                0 0 112 144 144 112 16 96
                0 128 128 128 224 144 144 0
                0 64 0 192 64 64 224 0
                0 32 0 96 32 32 32 192
                0 128 144 160 192 160 144 0
                0 64 64 64 64 64 32 0
                0 0 80 168 168 136 136 0
                0 0 224 144 144 144 144 0
                0 0 96 144 144 144 96 0
                0 0 224 144 144 224 128 128
                0 0 112 144 144 112 16 16
                0 0 96 128 128 128 128 0
                0 0 112 128 96 16 224 0
                0 64 224 64 64 64 32 0
                0 0 144 144 144 144 96 0
                0 0 136 136 80 80 32 0
                0 0 136 136 136 168 80 0
                0 0 144 144 96 144 144 0
                0 0 144 144 144 112 16 224
                0 0 240 32 64 128 240 0
                0 96 64 192 64 64 96 0
                0 64 64 64 64 64 64 0
                0 192 64 96 64 64 192 0
                0 80 160 0 0 0 0 0
                112 136 32 64 64 32 136 112

DEFINEPALETTE   0 2 6 8 18 20 24 26 0 5 15 3 24 11 16 25

EVENT PLAYER


EVENT SPRITETYPE1

; Enemy climbing a ladder.
IF DIRECTION = 0
    IF LADDERABOVE
        SPRITEUP
    ELSE
        GETRANDOM 2
        IF RND = 0
            LET DIRECTION = 2
        ELSE
            LET DIRECTION = 3
        ENDIF
        LET SETTINGA = 50
    ENDIF
ENDIF

; Enemy descending a ladder.
IF DIRECTION = 1
    IF LADDERBELOW
        SPRITEDOWN
    ELSE
        GETRANDOM 2
        IF RND = 0
            LET DIRECTION = 2
        ELSE
            LET DIRECTION = 3
        ENDIF
        LET SETTINGA = 50
    ENDIF
ENDIF

; Enemy moving left.
IF DIRECTION = 2
    IF CANGOLEFT
        SPRITELEFT
        LET FRAME = 0
    ELSE
        LET DIRECTION = 3
    ENDIF
    IF SETTINGA > 0
        SUBTRACT 1 FROM SETTINGA
    ELSE
        GETRANDOM 4
        IF RND = 0
            IF LADDERABOVE
                LET DIRECTION = 0
            ELSE
                IF LADDERBELOW
                    LET DIRECTION = 1
                ENDIF
            ENDIF
        ENDIF
    ENDIF
ENDIF

; Enemy moving right.
IF DIRECTION = 3
    IF CANGORIGHT
        SPRITERIGHT
        LET FRAME = 1
    ELSE
        LET DIRECTION = 2
    ENDIF
    IF SETTINGA > 0
        SUBTRACT 1 FROM SETTINGA
    ELSE
        GETRANDOM 4
        IF RND = 0
            IF LADDERABOVE
                LET DIRECTION = 0
            ELSE
                IF LADDERBELOW
                    LET DIRECTION = 1
                ENDIF
            ENDIF
        ENDIF
    ENDIF
ENDIF

; Test if hit player.
IF COLLISION 0
    KILL
ENDIF


EVENT SPRITETYPE2

IF SETTINGA = 0
    IF SETTINGB = 66
        LET SETTINGA = 1
    ELSE
        SUBTRACT 1 FROM SETTINGB
    ENDIF
ELSE
    IF SETTINGB = 70
        LET SETTINGA = 0
    ELSE
        ADD 1 TO SETTINGB
    ENDIF
ENDIF

SPRITEINK SETTINGB

IF COLLISION 0
    REMOVE
    EXPLODE 25
    SPRITEINK 7
    SCORE 100
    SUBTRACT 1 FROM A
    IF A = 0
        DELAY 50
        WHILE T > 0
            SUBTRACT 1 FROM T
            SCORE 1
            AT 12 26
            DISPLAY SECONDS T
            AT 3 25
            SHOWSCORE
            BEEP 50
            DELAY 2
        ENDWHILE
        NEXTLEVEL
    ENDIF
    SOUND 1
    AT 3 25
    SHOWSCORE
ENDIF


EVENT SPRITETYPE3



EVENT SPRITETYPE4



EVENT SPRITETYPE5



EVENT SPRITETYPE6



EVENT SPRITETYPE7



EVENT SPRITETYPE8



EVENT INITSPRITE

IF TYPE = 2
    ADD 1 TO A
    LET SETTINGA = 0
    LET SETTINGB = 69
ENDIF


EVENT MAINLOOP1

; Update the bonus timer.
ADD 1 TO S
IF S > 25
    SUBTRACT 25 FROM S
    IF T > 0
        SUBTRACT 1 FROM T
    ENDIF
    AT 12 26
    DISPLAY SECONDS T
ENDIF


EVENT MAINLOOP2



EVENT INTROMENU

INK 15
PAPER 0
CLS
AT 4 9

LET CONTROL = 99
WHILE CONTROL >= 99
    CLS
    AT 5 9
    PRINTMODE 1
    PRINT "DIAMOND GEEZER"
    PRINTMODE 0
    AT 9 10
    PRINT "1. KEYBOARD"
    AT 11 10
    PRINT "2. KEMPSTON"
    AT 13 10
    PRINT "3. SINCLAIR"
    LET CONTROL = 99
    WHILE CONTROL = 99
        IF KEY OPTION1
            LET CONTROL = 0
        ENDIF
        IF KEY OPTION2
            LET CONTROL = 1
        ENDIF
        IF KEY OPTION3
            LET CONTROL = 2
        ENDIF
    ENDWHILE
ENDWHILE
CLS

EVENT GAMEINIT

LET LIVES = 3
LET SCREEN = 0
INK 7
PAPER 2
BORDER 2
CLS
AT 2 25
PRINT "SCORE"
AT 5 25
PRINT "LIVES"
AT 8 26
PRINT "HIGH"
AT 11 26
PRINT "TIME"
AT 12 27
PRINT ":"
AT 14 25
PRINT "LEVEL"
INK 0
PAPER 6
AT 3 25
SHOWSCORE
AT 9 25
SHOWHIGH

EVENT RESTARTSCREEN

AT 6 27
DISPLAY LIVES

LET S = SCREEN
ADD 1 TO S
AT 15 26
DISPLAY TRIPLEDIGITS S

LET A = 0
LET T = 60                      ; 60 seconds
LET S = 0                       ; 25ths of a second

LET K = 0                       ; no  keys collected yet.

EVENT FELLTOOFAR

IF TYPE = 0
    KILL
ENDIF


EVENT KILLPLAYER

SOUND 0
; FADE
SUBTRACT 1 FROM LIVES


EVENT LOSTGAME

DELAY 50


EVENT COMPLETEDGAME

DELAY 50


EVENT NEWHIGHSCORE

INK 5
PAPER 0
CLW
PRINTMODE 1
AT 4 5
PRINT "NEW HIGH SCORE"
PRINTMODE 0
DELAY 100
EVENT COLLECTBLOCK

LET K = 1
