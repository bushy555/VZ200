;	pan out from centre demo
; 	like that of the last ASM demo on the demo cartridge.
;
;	0 black = 128
;	1 green = 143	5 white   = 207
; 	2 yellow= 159	6 cyan    = 223
;	3 blue  = 175	7 magenta = 239
;	4 red   = 191	8 buff    = 255

	ORG	$8000

	CALL    01C9h			; CLS. MODE(0).
	
	ld	de, $7000		; display to video.
	ld	hl, screen
	ld	bc, 512
	ldir

	ld	de, $B000		; display to video buffer.
	ld	hl, screen
	ld	bc, 512
	ldir

loop0:	ld	hl, $b000
	ld	b, 255			; FIRST LOT
loop1a:	ld	a, (hl)
	cp	143
	jr	nz, norsta
	ld	a, 255
	JR	HEREA
norsta: DEC	a				; increase color step + 16.
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
HEREA:	ld	(hl), a
	INC	HL
	djnz	loop1a

	ld	b, 255			; SECOND LOT
loop1b:	ld	a, (hl)
	cp	143
	jr	nz, norstb
	ld	a, 255
	JR	HEREB
norstb:	DEC	a			; increase color step + 16.
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
	DEC	a
HEREB:	ld	(hl), a
	INC	HL
	djnz	loop1b

	LD 	hl,0x6800
sync2:	BIT 	7,(hl)			; fancy wait retrace.
	jr	NZ,sync2

	LD 	hl,0x6800
sync3:	BIT 	7,(hl)			; fancy wait retrace.
	jr	Z,sync3




	push	de
	push	bc
	ld	hl, $B000
	ld	de, $7000
	ld	bc, 512
	ldir
	pop	bc
	pop	de


	LD 	BC,$2000
	CALL 	0060H		; delay



	jr	loop0



;	0 black = 128	5 white   = 207
;	1 green = 143	6 cyan    = 223
; 	2 yellow= 159	7 magenta = 239
;	3 blue  = 175	8 buff    = 255
;	4 red   = 191

screen:
  defb 	255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,  255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
  defb 	255,239,239,239,239,239,239,239,239,239,239,239,239,239,239,239,  239,239,239,239,239,239,239,239,239,239,239,239,239,239,239,255
  defb 	255,239,223,223,223,223,223,223,223,223,223,223,223,223,223,223,  223,223,223,223,223,223,223,223,223,223,223,223,223,223,239,255
  defb 	255,239,223,207,207,207,207,207,207,207,207,207,207,207,207,207,  207,207,207,207,207,207,207,207,207,207,207,207,207,223,239,255
  defb 	255,239,223,207,191,191,191,191,191,191,191,191,191,191,191,191,  191,191,191,191,191,191,191,191,191,191,191,191,207,223,239,255
  defb 	255,239,223,207,191,175,175,175,175,175,175,175,175,175,175,175,  175,175,175,175,175,175,175,175,175,175,175,191,207,223,239,255
  defb 	255,239,223,207,191,175,159,159,159,159,159,159,159,159,159,159,  159,159,159,159,159,159,159,159,159,159,175,191,207,223,239,255
  defb 	255,239,223,207,191,175,159,143,143,143,143,143,143,143,143,143,  143,143,143,143,143,143,143,143,143,159,175,191,207,223,239,255

  defb 	255,239,223,207,191,175,159,143,143,143,143,143,143,143,143,143,  143,143,143,143,143,143,143,143,143,159,175,191,207,223,239,255
  defb 	255,239,223,207,191,175,159,159,159,159,159,159,159,159,159,159,  159,159,159,159,159,159,159,159,159,159,175,191,207,223,239,255
  defb 	255,239,223,207,191,175,175,175,175,175,175,175,175,175,175,175,  175,175,175,175,175,175,175,175,175,175,175,191,207,223,239,255
  defb 	255,239,223,207,191,191,191,191,191,191,191,191,191,191,191,191,  191,191,191,191,191,191,191,191,191,191,191,191,207,223,239,255
  defb 	255,239,223,207,207,207,207,207,207,207,207,207,207,207,207,207,  207,207,207,207,207,207,207,207,207,207,207,207,207,223,239,255
  defb 	255,239,223,223,223,223,223,223,223,223,223,223,223,223,223,223,  223,223,223,223,223,223,223,223,223,223,223,223,223,223,239,255
  defb 	255,239,239,239,239,239,239,239,239,239,239,239,239,239,239,239,  239,239,239,239,239,239,239,239,239,239,239,239,239,239,239,255
  defb 	255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,  255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255

end
